---
description: 在本仓库中优先协同使用 Codex 技能（ai-spec、api-first-modular、code-debugger、debug-ui、ralph）的指导规则
alwaysApply: true
---

# Codex 技能协同开发总则

- 本仓库预装了一组 Codex 技能，详见 [AGENTS.md](mdc:AGENTS.md) 与 `.codex/skills/` 目录。
- 在处理需求、设计、开发与调试时，应优先考虑是否由技能协同完成，而不是单次“裸回答”。

## 技能选型优先级

- **需求不清晰 / 需要技术规格** → 优先调用 `ai-spec`
  - 将自然语言拆解为可执行的技术规格、接口列表与任务清单；
  - 适合作为任何中大型开发任务的第 0 步。

- **涉及前后端 / API 设计 / 跨层需求** → 优先调用 `api-first-modular`
  - 按“后端 API 包 → API 文档 → 前端消费 → 集成验证”的顺序拆解任务；
  - 确保业务逻辑只落在后端 API 包中，前端只负责渲染与交互。

- **Bug 修复 / 性能问题 / 增量开发** → 优先调用 `code-debugger`
  - 先判定问题归属层（后端 / 前端 / BFF / 合同不一致）再改代码；
  - 维护 `.debug/` 分析记录，避免反复踩坑。

- **前端 UI / 交互 / 样式异常** → 优先调用 `debug-ui`
  - 从“设计意图 → 视觉层 → 交互层 → 状态管理”四层排查；
  - 输出既美观又可落地的 CSS / 组件级改动建议。

- **已有或计划中的 PRD / 长流程需求** → 优先调用 `ralph`
  - 按 User Story 为粒度循环执行，实现从 PRD 到代码的闭环；
  - 适合阶段性大版本或多模块联动开发。

## 建议工作流（典型顺序）

1. `ai-spec`：澄清需求、产出技术规格与任务拆解。
2. `api-first-modular`：基于规格设计 API 包与三层架构边界。
3. 按任务执行具体实现（前后端 / BFF），必要时使用 `code-debugger` 与 `debug-ui`。
4. 有完整 PRD 或大版本规划时，引入 `ralph` 做自动化迭代。

> 在回答用户问题或修改代码前，若发现场景满足以上任一条件，应主动建议并协同调用对应技能，而非事后补救。

